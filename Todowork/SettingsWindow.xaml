<Window x:Class="Todowork.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="悬浮窗设置" Height="520" Width="500"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BrushSurfaceAlt}">
    <Border BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
            CornerRadius="12" Background="{StaticResource BrushSurface}" Margin="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Background="{StaticResource BrushSurface}"
                    BorderBrush="{StaticResource BrushBorderSubtle}" BorderThickness="0,0,0,1"
                    CornerRadius="12,12,0,0" Padding="20,16">
                <Grid>
                    <TextBlock Text="悬浮窗设置" VerticalAlignment="Center"
                               Foreground="{StaticResource BrushTextPrimary}"
                               FontFamily="{StaticResource AppFontFamilySemibold}"
                               FontSize="{StaticResource FontSizeLarge}" />
                </Grid>
            </Border>

            <!-- Settings Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20">
                <StackPanel>
                    <!-- Display Section -->
                    <TextBlock Text="显示设置"
                               FontFamily="{StaticResource AppFontFamilySemibold}"
                               FontSize="{StaticResource FontSizeTitle}"
                               Foreground="{StaticResource BrushTextPrimary}"
                               Margin="0,0,0,12" />

                    <!-- Show Background Toggle -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,12">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="显示背景"
                                           FontSize="{StaticResource FontSizeBody}"
                                           Foreground="{StaticResource BrushTextPrimary}"
                                           FontWeight="Medium" />
                                <TextBlock Text="为悬浮窗添加半透明背景"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource BrushTextSecondary}"
                                           Margin="0,4,0,0" />
                            </StackPanel>

                            <CheckBox Grid.Column="1" VerticalAlignment="Center"
                                      IsChecked="{Binding OverlayShowBackground, UpdateSourceTrigger=PropertyChanged}" />
                        </Grid>
                    </Border>

                    <!-- Background Opacity -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,12">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="背景透明度"
                                           FontSize="{StaticResource FontSizeBody}"
                                           Foreground="{StaticResource BrushTextPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />

                                <TextBlock Grid.Column="1"
                                           Text="{Binding OverlayBackgroundOpacity, StringFormat={}{0:P0}}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource BrushPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <Slider Minimum="0" Maximum="1"
                                    Value="{Binding OverlayBackgroundOpacity, UpdateSourceTrigger=PropertyChanged}"
                                    TickFrequency="0.1" IsSnapToTickEnabled="True" />
                        </StackPanel>
                    </Border>

                    <!-- Text Opacity -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,12">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="文字透明度"
                                           FontSize="{StaticResource FontSizeBody}"
                                           Foreground="{StaticResource BrushTextPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />

                                <TextBlock Grid.Column="1"
                                           Text="{Binding OverlayTextOpacity, StringFormat={}{0:P0}}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource BrushPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <Slider Minimum="0.1" Maximum="1"
                                    Value="{Binding OverlayTextOpacity, UpdateSourceTrigger=PropertyChanged}"
                                    TickFrequency="0.1" IsSnapToTickEnabled="True" />
                        </StackPanel>
                    </Border>

                    <!-- Font Size -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,12">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="字体大小"
                                           FontSize="{StaticResource FontSizeBody}"
                                           Foreground="{StaticResource BrushTextPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />

                                <TextBlock Grid.Column="1"
                                           Text="{Binding OverlayTextFontSize, StringFormat={}{0:F0} px}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource BrushPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <Slider Minimum="10" Maximum="28"
                                    Value="{Binding OverlayTextFontSize, UpdateSourceTrigger=PropertyChanged}"
                                    TickFrequency="2" IsSnapToTickEnabled="True" />
                        </StackPanel>
                    </Border>

                    <!-- Text Color -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="文字颜色"
                                       FontSize="{StaticResource FontSizeBody}"
                                       Foreground="{StaticResource BrushTextPrimary}"
                                       FontWeight="Medium"
                                       Margin="0,0,0,12" />

                            <UniformGrid Rows="1" Columns="6">
                                <Button Width="48" Height="48" Padding="0" Margin="0,0,8,0"
                                        Background="#FFFFFFFF"
                                        BorderBrush="{StaticResource BrushBorder}" BorderThickness="2"
                                        Command="{Binding SetOverlayTextColorCommand}"
                                        CommandParameter="#FFFFFFFF"
                                        Cursor="Hand"
                                        ToolTip="白色">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource RadiusM}"
                                                                SnapsToDevicePixels="True">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource BrushPrimary}" />
                                                                <Setter TargetName="border" Property="BorderThickness" Value="3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button Width="48" Height="48" Padding="0" Margin="0,0,8,0"
                                        Background="#FF000000"
                                        BorderBrush="{StaticResource BrushBorder}" BorderThickness="2"
                                        Command="{Binding SetOverlayTextColorCommand}"
                                        CommandParameter="#FF000000"
                                        Cursor="Hand"
                                        ToolTip="黑色">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource RadiusM}"
                                                                SnapsToDevicePixels="True">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource BrushPrimary}" />
                                                                <Setter TargetName="border" Property="BorderThickness" Value="3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button Width="48" Height="48" Padding="0" Margin="0,0,8,0"
                                        Background="#FF4DD0E1"
                                        BorderBrush="{StaticResource BrushBorder}" BorderThickness="2"
                                        Command="{Binding SetOverlayTextColorCommand}"
                                        CommandParameter="#FF4DD0E1"
                                        Cursor="Hand"
                                        ToolTip="青色">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource RadiusM}"
                                                                SnapsToDevicePixels="True">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource BrushPrimary}" />
                                                                <Setter TargetName="border" Property="BorderThickness" Value="3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button Width="48" Height="48" Padding="0" Margin="0,0,8,0"
                                        Background="#FF81C784"
                                        BorderBrush="{StaticResource BrushBorder}" BorderThickness="2"
                                        Command="{Binding SetOverlayTextColorCommand}"
                                        CommandParameter="#FF81C784"
                                        Cursor="Hand"
                                        ToolTip="绿色">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource RadiusM}"
                                                                SnapsToDevicePixels="True">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource BrushPrimary}" />
                                                                <Setter TargetName="border" Property="BorderThickness" Value="3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button Width="48" Height="48" Padding="0" Margin="0,0,8,0"
                                        Background="#FFFFB74D"
                                        BorderBrush="{StaticResource BrushBorder}" BorderThickness="2"
                                        Command="{Binding SetOverlayTextColorCommand}"
                                        CommandParameter="#FFFFB74D"
                                        Cursor="Hand"
                                        ToolTip="橙色">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource RadiusM}"
                                                                SnapsToDevicePixels="True">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource BrushPrimary}" />
                                                                <Setter TargetName="border" Property="BorderThickness" Value="3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button Width="48" Height="48" Padding="0"
                                        Background="#FFF48FB1"
                                        BorderBrush="{StaticResource BrushBorder}" BorderThickness="2"
                                        Command="{Binding SetOverlayTextColorCommand}"
                                        CommandParameter="#FFF48FB1"
                                        Cursor="Hand"
                                        ToolTip="粉色">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource RadiusM}"
                                                                SnapsToDevicePixels="True">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource BrushPrimary}" />
                                                                <Setter TargetName="border" Property="BorderThickness" Value="3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </UniformGrid>
                        </StackPanel>
                    </Border>

                    <!-- Position Section -->
                    <TextBlock Text="位置设置"
                               FontFamily="{StaticResource AppFontFamilySemibold}"
                               FontSize="{StaticResource FontSizeTitle}"
                               Foreground="{StaticResource BrushTextPrimary}"
                               Margin="0,0,0,12" />

                    <!-- Horizontal Position -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,12">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="水平位置"
                                           FontSize="{StaticResource FontSizeBody}"
                                           Foreground="{StaticResource BrushTextPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />

                                <TextBlock Grid.Column="1"
                                           Text="{Binding OverlayLeftRatio, StringFormat={}{0:P0}}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource BrushPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <Slider Minimum="0" Maximum="1"
                                    Value="{Binding OverlayLeftRatio, UpdateSourceTrigger=PropertyChanged}"
                                    TickFrequency="0.05" IsSnapToTickEnabled="True" />
                        </StackPanel>
                    </Border>

                    <!-- Vertical Position -->
                    <Border Background="{StaticResource BrushSurface}"
                            BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                            CornerRadius="{StaticResource RadiusM}" Padding="16" Margin="0,0,0,0">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="垂直位置"
                                           FontSize="{StaticResource FontSizeBody}"
                                           Foreground="{StaticResource BrushTextPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />

                                <TextBlock Grid.Column="1"
                                           Text="{Binding OverlayTopRatio, StringFormat={}{0:P0}}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource BrushPrimary}"
                                           FontWeight="Medium"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <Slider Minimum="0" Maximum="1"
                                    Value="{Binding OverlayTopRatio, UpdateSourceTrigger=PropertyChanged}"
                                    TickFrequency="0.05" IsSnapToTickEnabled="True" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
